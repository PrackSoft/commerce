{% extends "auctions/layout.html" %}

{% block body %}
    <h2>My Purchases</h2>                                                       <!-- Displays the userâ€™s purchase history with a clear header. -->
    {% for listing in listings %}                                                   <!-- Iterates over all listings the user has won. -->
        <a href="{% url 'listing_detail' listing.id %}">
            <div class="listings">                                                  <!-- Wraps each listing in a <div> for consistent styling. -->
                <!-- Shows key information: title, seller, description, and final price. -->
                <h3>{{ listing.title }}</h3>
                <p>{{ listing.description }}</p>
                <p>Current price: ${{ listing.current_price }}</p>
                {% if listing.image_url %}                                          <!-- Conditionally renders listing images if a URL is provided. -->
                    <img src="{{ listing.image_url }}" alt="{{ listing.title }}">
                {% endif %}
            </div>
        </a>
    {% empty %}                                                                     <!-- Handles the case when the user has no purchases. -->
        <p>You have not placed a bid on any listings yet.
</p>
    {% endfor %}
{% endblock %}
